# ğŸğŸ™TDD(í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ)
## React-testing-libraryë¥¼ ê¸°ë°˜ìœ¼ë¡œ TDDê°œë°œ.
<br/>

# Enzymeê³¼ RTL(React-testing-library)ë¹„êµ
- **`Enzyme`**
  - RTLë“±ì¥ ì´ì „ê¹Œì§€ Enzymeì´ë¼ëŠ” testing-libraryê°€ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆì—ˆë‹¤. 
  - `Implementation Driven Test`ë°©ë²•ë¡ ì„ ë”°ë¥´ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸°ì— ì í•©í•˜ë‹¤.
  - ì‹¤ì œ ë¸Œë¼ìš°ì € DOMì´ ì•„ë‹Œ, ê°€ìƒ DOMì„ ê¸°ì¤€ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤. 
  - ë”°ë¼ì„œ, í…ŒìŠ¤íŠ¸ ëŒ€ìƒ React ì»´í¬ë„ŒíŠ¸ì˜ propsë‚˜ stateë¥¼ ì¡°íšŒí•˜ì—¬ ê²€ì¦í•˜ê¸° ìš©ì´í•˜ë‹¤.

- **`react-testing-library`**
  - `Behavior Driven Test`ë°©ë²•ë¡ ì„ ë”°ë¥´ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸°ì— ì í•©í•˜ë‹¤.
  - jestë¥¼ ê¸°ë°˜ìœ¼ë¡œ UIí…ŒìŠ¤íŠ¸ë¥¼ ì§€ì›í•´ì£¼ëŠ” DOM Testing Libraryì— React Componentë¥¼ ìœ„í•œ APIë“¤ì´ ì¶”ê°€ëœ ê²ƒì´ë‹¤.
  - ì‹¤ì œ DOMì„ ê¸°ì¤€ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ Reactì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ëŠ” ì˜ë¯¸ê°€ ì—†ìœ¼ë©°, ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì—ì„œ ëœë”ë§í•˜ëŠ” ì‹¤ì œ HTMLë§ˆí¬ì—…ì˜ ëª¨ìŠµì´ ì–´ë–¤ì§€ì— ëŒ€í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìš©ì´í•˜ë‹¤.
  - `render()`í•¨ìˆ˜ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ëœë”ë§í•´ì£¼ê³ ,`getBy*`ë“±ì˜ queryë¥¼ í†µí•´ì„œ ìš”ì†Œë¥¼ ì°¾ê³ (getBy*, queryBy*, findBy* ë“± ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•¨.), ì´ë²¤íŠ¸ë¥¼ ë°œìƒ(`fireEvent`)ì‹œí‚¤ê³ , `expect` functionì„ í†µí•´ì„œ ì˜ˆì¸¡í•œ ê²°ê³¼ëŒ€ë¡œ ì´ë£¨ì–´ì§€ëŠ”ì§€ í™•ì¸í•œë‹¤.
  - ì»´í¬ë„ŒíŠ¸ì˜ ê¸°ëŠ¥ì´ ë˜‘ê°™ì´ ì‘ë™í•œë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ì˜ ë‚´ë¶€êµ¬í˜„ë°©ì‹ì´ ë§ì´ ë°”ë€Œì—ˆì–´ë„ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ì§€ ì•Šë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
  - react-testing-libraryëŠ” ì •ë§ í•„ìš”í•œ ê¸°ëŠ¥ë“¤ë§Œ ì§€ì›ì„ í•´ì£¼ê¸° ë•Œë¬¸ì— ë§¤ìš° ê°€ë³ê³ , ê°œë°œìë“¤ë„ ì¼ê´€ì„±ìˆê³  ì¢‹ì€ ê´€ìŠµì„ ë”°ë¥´ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ìœ ë„í•´ì¤€ë‹¤.

*í…ŒìŠ¤íŠ¸ í˜ëŸ¬ë‹¤ì„ ìì²´ê°€ `Behavior Dirven Test` ìª½ìœ¼ë¡œ í˜ëŸ¬ê°€ëŠ” ì¶”ì„¸ì—¬ì„œ Enzymeë³´ë‹¤ RTL ì‚¬ìš© í™•ë¥ ì´ ë†’ë‹¤.*


# cra(create-react-app)ìœ¼ë¡œ ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ jestê°€ ë‚´ì¥ë˜ì–´ ìˆë‹¤.
- ì•„ë˜ ì‚¬ì§„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ testing-libraryê°€ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤.(ë¹¨ê°„ë¸”ë¡)
- npm run startë¥¼ í•´ì„œ test.jsíŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ì.(ë…¸ë€ë°‘ì¤„)
  - <img src="../../images/tdd.jpg" >

<br/>
<br/>
<br/>

---
## * craë¡œ ì•± ìƒì„± í›„ ì–´ë– í•œ ìˆ˜ì •ì—†ì´ npm startì™€ npm run testë¥¼ ì‹¤í–‰í•œ ì½”ë“œì´ë‹¤. (ì •ì  ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŒ…)
  - src > app.js 
    - <img src="../../images/app.jsì´ˆê¸°.jpg">
  - src > app.test.js
    - <img src="../../images/app.test.jsí…ŒìŠ¤íŠ¸ì½”ë“œ.jpg">
  - í„°ë¯¸ë„ì°½ì—ì„œ ì™¼:npm start(yarn start)ì™€ ì˜¤:npm run test
    - <img src="../../images/npmstart,testí™”ë©´.jpg">
    - JestëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆ˜ì •ëœ íŒŒì¼ê³¼ ì—°ê´€ë˜ì–´ ìˆëŠ” testë§Œ ì‹¤í–‰í•˜ëŠ” ê²ƒ ê°™ë‹¤. ì§€ê¸ˆì€ ì•„ë¬´ëŸ° ìˆ˜ì •ì‚¬í•­ì—†ì´ testë¥¼ ì‹¤í–‰í–ˆê¸°ë•Œë¬¸ì— ìœ„ì˜ ì˜¤ë¥¸ìª½ê³¼ ê°™ì€ ë©”ì„¸ì§€ê°€ ì¶œë ¥ëœë‹¤.
    - í”„ë¡œì íŠ¸ì— ê¸°ë³¸ì ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆëŠ” `App.test.js`íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œ **a í‚¤ ë¥¼ ëˆŒëŸ¬ì„œ** ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¤ê±°ë‚˜, `__test__`í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ ê·¸ ì•ˆì˜ **x.test.jsíŒŒì¼ì„ ì‹¤í–‰**ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
  - npm start(yarn start)í•œ í›„ í™”ë©´ì— ë Œë”ë§.(localhost:3000)
    - <img src="../../images/npmstartí™”ë©´.jpg">
  - npm run testí›„ ì„±ê³µ í„°ë¯¸ë„.
    - 1ê°œì˜ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µë˜ì—ˆìŒì„ ë³´ì—¬ì¤€ë‹¤.
      - <img src="../../images/testì„±ê³µ.jpg">
    - ìœ„ì˜ ì´ë¯¸ì§€ë¥¼ ì¡°ê¸ˆ ë” **ì„¤ëª…**í•´ë³´ìë©´, App Componentë¥¼ renderí•˜ê³  `getByText`ë¡œ 'learn react'ë¼ëŠ” í…ìŠ¤íŠ¸ë¥¼ ê°€ì§€ê³  ìˆëŠ” DOM Elementë¥¼ ì°¾ì€ í›„ì—, í•´ë‹¹ ìš”ì†Œê°€ documentì— ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•œ ê²ƒì´ë‹¤.
  - npm run testí›„ ì‹¤íŒ¨ í„°ë¯¸ë„.
    - App.jsxíŒŒì¼ë¡œ ê°€ì„œ 'Learn React'í…ìŠ¤íŠ¸ê°€ ìˆëŠ” aíƒœê·¸ì˜ ë‚´ìš©ì„ 'react!!'ë¡œ **ìˆ˜ì •**í–ˆë‹¤.
      - <img src="../../images/testì‹¤íŒ¨1.jpg">
      - <img src="../../images/testì‹¤íŒ¨2.jpg">
    - í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆìŒì„ ë³´ì—¬ì¤€ë‹¤.

</br>

- ê¸°ë³¸ì ì¸ TDD ë™ì‘ì„ ì‚´í´ ë³´ì•˜ìœ¼ë‹ˆ ê°€ë²¼ìš´ ì¹´ìš´í„°ì•±ì„ ë§Œë“¤ì–´ë³´ì.

<br/>

---
## * ë™ì  ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŒ…
  -  srcë””ë ‰í„°ë¦¬ì—ì„œ *App.test.js*íŒŒì¼ì„ *ì‚­ì œ* í›„, **`Counter`í´ë”** ìƒì„±í•˜ê³ , í•˜ìœ„ í´ë”ì— `Counter.jsx`íŒŒì¼ê³¼ **`__test__`í´ë”** ìƒì„±. `__test__`ì˜ í•˜ìœ„ í´ë”ì— `Counter.test.js`íŒŒì¼ ìƒì„±.

  1. ì»´í¬ë„ŒíŠ¸ ë¡œì§ì´ ì‘ì„±ë  Counter.jsxíŒŒì¼ê³¼ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Counter.test.jsíŒŒì¼ì„ ìƒì„±í•˜ê³  í…ŒìŠ¤íŠ¸ê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
      ```js
      // directoryê²½ë¡œ src > Counter > Counter.jsx
      import React from 'react';

      function Counter() {
        return (
          <div>
            <h3 data-testid="header">hi counter</h3>
          </div>
        );
      }

      export default Counter;
      ```
      - `header`ë¼ëŠ” testIdë¥¼ ê°€ì§„ íƒœê·¸ ì•ˆì˜ textê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í–ˆë‹¤. (h3íƒœê·¸ì˜ data-testid ì–´íŠ¸ë¦¬ë·°íŠ¸ê°€ headerì´ë¯€ë¡œ ê·¸ ì•ˆì— ì‘ì„±ëœ í…ìŠ¤íŠ¸ hi counterê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‘ì„±í•¨.)
      - `expect(headerElement.textContent).toBe('hi counter');` === 'headerElement.textContentì— 'hi counter'ê°€ ìˆì„ê²ƒìœ¼ë¡œ(toBe) ê¸°ëŒ€í•œë‹¤(expect). ëŠ” ëœ»ìœ¼ë¡œ ì´í•´í•˜ë©´ ì‰½ë‹¤.
        ```js
        // src > Counter > __test__ > Counter.test.js
        import React from 'react';
        import Counter from '../Counter';
        import { render } from '@testing-library/react';
        import '@testing-library/jest-dom/extend-expect';

        test('header renders with correct text', () => {
          const component = render(<Counter />);
          // const {getByTestId} = render(<Counter />); // ë™ì¼
          const headerElement = component.getByTestId('header');

          expect(headerElement.textContent).toBe('hi counter');
        });
        ```
      - ë§Œì•½ Counter.jsxì—ì„œ **'hi counter'** ë¥¼ **'hey counter'** ë¡œ ë°”ê¾¸ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
        - <img src="../../images/testì¹œì ˆí•´.jpg">
        - `hi counterë¥¼ ê¸°ëŒ€`í–ˆëŠ”ë° `ì‹¤ì œë¡œ ê°€ì ¸ì˜¨ ê±´ hey counter`ë¼ **í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨**ë¥¼ ë³´ì—¬ì¤€ë‹¤.
        - ì¹œì ˆí•˜ê²Œë„ ê²½ë¡œì™€ ì½”ë“œê°€ ì‘ì„±ëœ ì¤„ë„ ì•Œë ¤ì¤€ë‹¤.
    
</br>

2. ì´ˆê¸°ì¹´ìš´íŠ¸ì¸ '0'ê³¼, '-'ë²„íŠ¼, '+'ë²„íŠ¼ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸.
    - ì´ˆê¸°ê°’`0`, ì¹´ìš´íŠ¸ ì¡°ì‘`-`, `+`ë²„íŠ¼ë“¤ì„ ì»´í¬ë„ŒíŠ¸ ë¡œì§ê³¼ ì¼ì¹˜í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±.
      ```js
      // Counter.test.js
      import React from 'react';
      import Counter from '../Counter';
      import { render } from '@testing-library/react';
      import '@testing-library/jest-dom/extend-expect';

      test('header renders with correct text', () => {
        const component = render(<Counter />);
        // const {getByTestId} = render(<Counter />); // ë™ì¼
        const headerElement = component.getByTestId('header');

        expect(headerElement.textContent).toBe('hi counter');
      });

      // <!-- ìƒˆë¡œ ì¶”ê°€ë¨ -->
      test('check init count', () => {
        const { getByTestId } = render(<Counter />);
        // '0'ì´ ìˆëŠ”ì§€
        const countElement = getByTestId('counter');
        expect(countElement.textContent).toBe('0');
      });

      test('add button renders with +', () => {
        const { getByTestId } = render(<Counter />);
        const addBtn = getByTestId('plusButton');
        // '+' ê°€ ìˆëŠ”ì§€
        expect(addBtn.textContent).toBe('+');
      });

      test('subtract button renders with -', () => {
        const { getByTestId } = render(<Counter />);
        const minusBtn = getByTestId('minusButton');
        // '-' ê°€ ìˆëŠ”ì§€
        expect(minusBtn.textContent).toBe('-');
      });
      // <!-- ì—¬ê¸°ê¹Œì§€ -->
      ```
    - ì—¬ê¸°ê¹Œì§€ ì‘ì„±í•˜ê²Œ ë˜ë©´, Counter.jsxì—ì„œëŠ” ì•„ì§ 'hi counter'ë¼ëŠ” ì œëª©ë§Œ ë¶™ì—¬ ì£¼ì—ˆê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ì—ì„œ ì‹¤íŒ¨ê°€ ëœë‹¤.
    - ê·¸ëŸ¼ ì´ì œ ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µí•˜ë„ë¡ Counter.jsxë¥¼ ìˆ˜ì •í•´ì„œ countì´ˆê¸° ìˆ«ì0ê³¼ +, -ë²„íŠ¼ì„ ë§Œë“¤ì–´ì„œ ë Œë”í•´ì£¼ì.
      ```js
      // Counter.jsx
      import React from 'react';

      function Counter() {
        return (
          <div>
            <h3 data-testid="header">hey counter</h3>
            <!-- ìƒˆë¡œ ì¶”ê°€ë¨ -->
            <div className="center">
              <button data-testid="minusButton">-</button>
              <p data-testid="counter">0</p>
              <button data-testid="plusButton">+</button>
            </div>
            <!-- ì—¬ê¸°ê¹Œì§€ -->
          </div>
        );
      }

      export default Counter;
      ```
    - ì§œì”! í…ŒìŠ¤íŠ¸ê°€ passë˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

3. plus, minus êµ¬í˜„
    - ì´ˆê¸°ê°’ 0 ì—ì„œ + ë²„íŠ¼ì„ í´ë¦­í•˜ê³  textContentì— 1ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. 
    - ì´ˆê¸°ê°’ 0 ì—ì„œ - ë²„íŠ¼ì„ í´ë¦­í•´ì„œ textContentì— -1ì´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤. 
      ```js
      // Counter.test.js
      import React from 'react';
      import Counter from '../Counter';
      import { fireEvent, render } from '@testing-library/react';
      import '@testing-library/jest-dom/extend-expect';

      // ... ìœ„ì˜ 2ë²ˆ ì½”ë“œì— ì´ì–´ì„œ

      test('click on add btn adds 1 to counter', () => {
        const { getByTestId } = render(<Counter />);
        const counterElement = getByTestId('counter');

        // + ë²„íŠ¼ í´ë¦­
        const addBtnElement = getByTestId('plusButton');
        // ì²˜ìŒì€ 0
        expect(counterElement.textContent).toBe('0');
        // í´ë¦­ì´ë²¤íŠ¸ ë°œìƒ
        fireEvent.click(addBtnElement);
        // í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ í›„ 1ì´ ë˜ëŠ”ì§€
        expect(counterElement.textContent).toBe('1');
      });

      test('click on subtract btn subtracts 1 to counter', () => {
        const { getByTestId } = render(<Counter />);
        const counterElement = getByTestId('counter');

        // - ë²„íŠ¼ í´ë¦­
        const minusBtnElement = getByTestId('minusButton');
        // ì²˜ìŒì€ 0
        expect(counterElement.textContent).toBe('0');
        // í´ë¦­ì´ë²¤íŠ¸ ë°œìƒ
        fireEvent.click(minusBtnElement);
        // í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ í›„ -1ì´ ë˜ëŠ”ì§€
        expect(counterElement.textContent).toBe('-1');
      });
      ```
      - testê²°ê³¼ëŠ” ë‹¹ì—°íˆ Failì´ë‹¤.
      - Counter.jsxì—ì„œ ì½”ë“œë¥¼ ìˆ˜ì •, ì¶”ê°€í•˜ì.

      - onClickPlus, onClickMinusëŠ” useCallbackìœ¼ë¡œ countê°€ ê°±ì‹ ë  ë•Œë§ˆë‹¤ ì •ì˜ ë˜ëŠ” í•¨ìˆ˜ë¡œ êµ¬í˜„í–ˆê³ , count stateë¥¼ ê° +1, -1 í•´ì¤€ë‹¤
      ```js
      // Counter.jsx
      import React from 'react';
      import './Counter.css';
      import { useCallback } from 'react';
      import { useState } from 'react';

      function Counter() {
        const [count, setCount] = useState(0);
        const onClickPlus = useCallback(() => {
          setCount(count + 1);
        }, [count]);
        const onClickMinus = useCallback(() => {
          setCount(count - 1);
        }, [count]);

        return (
          <div>
            <h3 data-testid="header">hey counter</h3>
            <div className="center">
              <button data-testid="minusButton" onClick={onClickMinus}>
                -
              </button>
              <p data-testid="counter">{count}</p>
              <button data-testid="plusButton" onClick={onClickPlus}>
                +
              </button>
            </div>
          </div>
        );
      }

      export default Counter;
      ```